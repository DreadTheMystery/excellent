<%- include('partials/adminHeader', { title: 'Student Attendance' }) %>
  <%- include('partials/adminNav', { title: 'Student Attendance' }) %>

    <main class="container section">
      <div class="panel">
        <h2>Record Student Attendance</h2>
        <form action="/dashboard/attendance/students" method="POST" class="form grid-form">
          <select name="student_id" required>
            <option value="">Select Student</option>
            <% students.forEach((student)=> { %>
              <option value="<%= student.id %>">
                <%= student.first_name %>
                  <%= student.last_name %> - <%= student.class_name %>
              </option>
              <% }) %>
          </select>
          <select name="class_name" required>
            <option value="">Class</option>
            <% classOptions.forEach((className)=> { %>
              <option value="<%= className %>">
                <%= className %>
              </option>
              <% }) %>
          </select>
          <input type="date" name="attendance_date" value="<%= date %>" required />
          <select name="status" required>
            <option value="Present">Present</option>
            <option value="Absent">Absent</option>
            <option value="Late">Late</option>
          </select>
          <button class="btn" type="submit">Save Attendance</button>
        </form>
      </div>

      <div class="panel">
        <h2>Attendance Records - <%= date %>
        </h2>
        <div class="table-wrapper">
          <table class="table">
            <thead>
              <tr>
                <th>Student</th>
                <th>Class</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <% if (!records.length) { %>
                <tr>
                  <td colspan="3">No attendance recorded for this date.</td>
                </tr>
                <% } %>
                  <% records.forEach((record)=> { %>
                    <tr>
                      <td>
                        <%= record.first_name %>
                          <%= record.last_name %>
                      </td>
                      <td>
                        <%= record.class_name %>
                      </td>
                      <td><span class="badge badge-primary">
                          <%= record.status %>
                        </span></td>
                    </tr>
                    <% }) %>
            </tbody>
          </table>
        </div>
      </div>
    </main>

    <%- include('partials/adminFooter') %>